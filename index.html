<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Delayed Async Queue by pbojinov</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Delayed Async Queue</h1>
      <h2 class="project-tagline">A Google Analytics like queue (think _gaq) used to process things asyncronously</h2>
      <a href="https://github.com/pbojinov/delayed-async-queue" class="btn">View on GitHub</a>
      <a href="https://github.com/pbojinov/delayed-async-queue/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/pbojinov/delayed-async-queue/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <blockquote>
<p>This is an alpha work in progress. It's used in production at the moment but this is an attempt to make it its own stand-alone library. Use at your own risk...for now.</p>
</blockquote>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Getting Started</h2>

<pre><code>npm install daq
</code></pre>

<p>This is indented to be used in the browser, not on the server, since the nature of the problem it tries to solve is allow third party code to trigger things in your client-side app later, when it loads.</p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Examples</h2>

<div class="highlight highlight-source-js"><pre><span class="pl-c">// [Third-Party Code]</span>
<span class="pl-c">// 3rd party code (such as A/B testing tool) pushes stuff in the queue to be executed later when the page is loaded</span>
<span class="pl-c">// Note: the window scope of the third-party script should match the window scope your app is executing in</span>
<span class="pl-c">//       otherwise the queue (window._daq) will be empty or undefined.</span>
<span class="pl-c1">window</span>.<span class="pl-smi">_daq</span> <span class="pl-k">=</span> <span class="pl-c1">window</span>.<span class="pl-smi">_daq</span> <span class="pl-k">||</span> [];
<span class="pl-smi">_daq</span>.<span class="pl-c1">push</span>([() <span class="pl-k">=&gt;</span> {
  <span class="pl-en">console</span>.<span class="pl-c1">log</span>(<span class="pl-s"><span class="pl-pds">'</span>hi there queue, thanks for running me!<span class="pl-pds">'</span></span>);
}]);

<span class="pl-c">// [Your App Code]</span>
<span class="pl-c">// Run the queue in your app</span>
<span class="pl-k">import</span> <span class="pl-smi">DelayedAsyncQueue</span> <span class="pl-k">from</span> <span class="pl-s"><span class="pl-pds">'</span>daq<span class="pl-pds">'</span></span>;
<span class="pl-k">const</span> <span class="pl-c1">queue</span> <span class="pl-k">=</span> <span class="pl-k">new</span> <span class="pl-en">DelayedAsyncQueue</span>(queue <span class="pl-k">=</span> <span class="pl-c1">window</span>.<span class="pl-smi">_daq</span>); <span class="pl-c">// pass in the queue from above</span>
<span class="pl-smi">queue</span>.<span class="pl-c1">start</span>();

<span class="pl-c">// ...</span>
<span class="pl-c">// you'll see the following in console after a second or two</span>
<span class="pl-c">// &gt; hi there queue, thanks for running me!</span>

<span class="pl-c">// done processing everything? stop the queue</span>
<span class="pl-smi">queue</span>.<span class="pl-c1">stop</span>();</pre></div>

<h2>
<a id="notes" class="anchor" href="#notes" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Notes</h2>

<p>The current setup only supports executing anonymous functions at the moment. The next step is to allow named functions and namespaced functions, such as:</p>

<pre><code>_daq.push(['someCoolFunction', 'do-something']); // test named function
_daq.push(['App.mynamespacedfunction', 'some-something-else', 'more data']); // test namespaced function
</code></pre>

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/pbojinov/delayed-async-queue">Delayed Async Queue</a> is maintained by <a href="https://github.com/pbojinov">pbojinov</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
